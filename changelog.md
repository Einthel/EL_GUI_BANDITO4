# Changelog

Все заметные изменения в этом проекте будут задокументированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- **Коммуникация (WebSocket):**
    - Реализован WebSocket сервер на базе `FastAPI` + `Uvicorn` внутри приложения `el_bandito`. Сервер запускается в отдельном потоке `QThread` и не блокирует интерфейс.
    - Реализован WebSocket клиент `BanditoClient` (на базе `QWebSocket` и `QAbstractSocket`) в `el_cliento` с поддержкой авто-переподключения.
    - Двусторонний обмен JSON-сообщениями.
- **Интерфейс и UX:**
    - Реализована визуальная индикация статуса сети (Connect/Disconnect):
        - Поля статуса меняют цвет (Зеленый/Красный) в зависимости от состояния подключения.
        - Использованы JSON-файлы стилей (`style_bandito.json`, `style_cliento.json`) для гибкой настройки темы (Dark Theme).
    - Внедрена система глобального применения стилей при запуске.
- **Настройки (Bandito & Cliento):**
    - Ручное управление `IP Source` вместо авто-определения (теперь поле редактируемое и сохраняемое).
    - **[NEW]** Полная реализация сохранения настроек клиента (`el_cliento`) в `configs/el_cliento_config.json`.
    - Улучшенный механизм Ping:
        - Отправка 4 пакетов по 32 байта (стандарт).
        - Парсинг вывода консоли для отображения среднего времени отклика или конкретной ошибки ("Превышен интервал...", "General failure").
        - Поддержка кодировки `cp866` для корректного чтения вывода в русской Windows.
        - Асинхронное обновление UI (`processEvents`) во время пинга.
        - **[FIX]** Убран жесткий таймаут процесса ping, что предотвращает ложные срабатывания "TIMEOUT" на медленных сетях.
    - Реализовано окно настроек с валидацией полей.
    - Валидация IP (RegExp), Порта (Int) и Логина (без пробелов).
    - Сохранение конфигурации в JSON (с шифрованием пароля Base64+XOR).
- **Инфраструктура:**
    - Создан универсальный `ConfigManager` для работы с настройками.
- Добавлена структура проекта: разделение на Client (RPi) и Server (PC).
- Реализована автоматическая компиляция `.ui` файлов при запуске.

### Changed
- Поле `IP Source` в настройках теперь доступно для ручного ввода.
- Изменена структура хранения ресурсов: исходники в `ui_raw`, готовые файлы в `ui_done`.
- Переименованы основные директории и файлы запуска:
    - `server_pc/` -> `el_bandito/`
    - `client_rpi/` -> `el_cliento/`
    - `ban_main.py` -> `el_bandito.py`
    - `cli_main.py` -> `el_cliento.py`
- Оптимизированы импорты модулей для корректной работы внутри пакетов.

## [0.0.1] - 2026-01-18
### Added
- Инициализация репозитория.
- Базовые файлы `.ui` (el_gui_bandito, el_gui_cliento, bandito_settings, cliento_settings).
